# 写真家モード実装計画書

## 📋 プロジェクト概要

### 基本情報
- **追加機能名**: 写真家モード（タグ検索特化）
- **主要目的**: **画像・文書からタグを自動抽出して検索容易性を最大化**
- **対象ファイル**: JPEG/JPG、PNG、GIF、PDF（他2モードと同様）
- **既存モード**: デザイン事務所、会計事務所に続く3つ目のモード
- **特徴**: タグベース検索に最適化された分析システム（写真・イラスト・文書対応）

### 写真家モードの核心機能
- **対象ユーザー**: 写真家、フォトグラファー、写真スタジオ、イラストレーター、デザイナー、画像管理者
- **解決する課題**: 
  - **大量ファイルからの瞬時検索**: タグベース検索で目的のファイルを即座に発見
  - **自動タグ生成**: 手動タグ付けの手間を削減、一貫性のあるタグ体系
  - **多角的検索**: 被写体・色調・構図・雰囲気・技法・文書内容など複数観点でのタグ化
  - **混在ファイル統合管理**: 写真・イラスト・PDF文書を統一的にタグ管理
  - **検索精度向上**: 曖昧な記憶からでも関連タグでファイルを特定可能

## 🎯 実装計画

### Phase 1: 基本設定の追加（1時間）
#### 1.1 Config.gsに写真家モード設定追加
```javascript
'photographer': {
  name: '写真家',
  systemTitle: '📸 写真家・フォトスタジオ検索システム',
  searchExamples: ['ポートレート', '風景', 'モデル', 'スタジオ', '自然光', 'イベント'],
  placeholder: '例: ポートレート, 風景, モデル撮影...',
  colors: {
    primary: '#6B46C1',      // 紫色（クリエイティブ）
    light: '#8B5CF6',
    pale: '#C4B5FD',
    cream: '#F3F0FF',
    dark: '#553C9A',
    accent: '#7C3AED'
  },
  aiPrompt: 'あなたは写真家・フォトスタジオの専門AIです。写真の内容、撮影技法、被写体を詳細に分析します。',
  documentTypes: ['写真', 'ポートレート', '風景', 'スタジオ', 'イベント', '商品']
}
```

#### 1.2 写真家専用の解析フィールド定義
```javascript
analysisFields: [
  '被写体・モデル',
  '撮影場所・背景',
  '撮影技法・ライティング',
  'カメラ設定（ISO・絞り・シャッター）',
  '色調・雰囲気',
  'ジャンル・カテゴリ'
]
```

### Phase 2: DocumentProcessor.gsの拡張（1.5時間）
#### 2.1 タグ特化処理ロジックの実装
- 全ファイル形式対応（JPEG/PNG/GIF/PDF）
- ファイル形式に応じたタグ抽出最適化
- EXIF情報の抽出・タグ化機能追加

#### 2.2 写真家専用タグ抽出プロンプトの実装
```javascript
static createPhotographerTagExtractionPrompt(fileName, mimeType, exifData) {
  return `
あなたは画像タグ抽出専門AIです。この画像から検索に最適な多角的タグを生成してください。

【タグ抽出最適化指示】
- Gemini 2.0 Flashの高精度画像認識を活用
- 検索性を最重視したタグ体系で出力
- 階層的タグ構造（大分類→中分類→詳細タグ）
- 同義語・関連語も含めた網羅的タグ生成

【タグ抽出カテゴリ（検索特化・全ファイル形式対応）】
🎯 **被写体・内容タグ**: 人物,動物,物体,建物,自然,キャラクター,文書内容
🎨 **色彩・スタイルタグ**: 主要色,色調,明度,彩度,パレット,デザインスタイル
📐 **構図・レイアウトタグ**: アングル,フレーミング,レイアウト,バランス,文書構造
💡 **光線・品質タグ**: 自然光,人工光,時間帯,光の方向,陰影,画質
🎭 **雰囲気・トーンタグ**: 感情,印象,スタイル,ムード,トーン,文書の性質
📍 **場所・用途タグ**: 屋内外,環境,背景,ロケーション,設定,文書用途
🎪 **ジャンル・分野タグ**: 撮影目的,用途,スタイル分類,アート分野,文書種別
⚙️ **技法・形式タグ**: カメラ設定,技術的要素,画法,表現技法,文書形式
🎨 **作品特化タグ**: デジタル,手描き,ベクター,ドット絵,水彩,油彩,漫画,アニメ,リアル系,デフォルメ

【タグ出力形式】
- カンマ区切りのタグリスト
- 検索頻度の高いタグを優先
- 英語・日本語併記で検索幅拡大
- 1画像あたり20-30個のタグ生成
- タグの重要度を3段階で分類

ファイル名: ${fileName}
画像形式: ${mimeType}
${exifData ? `EXIF情報: ${exifData}` : ''}

この画像を詳細分析し、検索で発見しやすい包括的なタグセットを生成してください。
`;
}
```

### Phase 3: UI（search.html）の拡張（1時間）
#### 3.1 モード選択機能の追加
- 業種選択セレクトボックスの実装
- 動的カラーテーマ切り替え機能
- モード別検索例の表示切替

#### 3.2 写真家モード専用UI要素（タグ検索特化・写真/イラスト対応）
- 紫系カラーテーマの適用
- **タグクラウド表示**: 自動生成されたタグの視覚的表示
- **タグ検索バー**: タグ入力によるインクリメンタル検索
- **カテゴリ別タグフィルター**: 被写体・色彩・構図・イラスト技法等での絞り込み
- **画像種別タグ**: 'photograph', 'illustration', 'digital_art', 'traditional_art'
- **検索例**: 'ポートレート', '青空', '自然光', 'アニメ', 'デジタル', 'キャラクター'

### Phase 4: タグ抽出プロンプト最適化とAI分析強化（1時間）
#### 4.1 タグ抽出プロンプトの最適化
- **検索精度重視**: 検索で使われやすいタグの優先生成
- **階層的タグ構造**: 大カテゴリ→詳細タグの体系化
- **同義語展開**: 'portrait'⟷'ポートレート'等の多言語対応
- **感情・印象タグ**: '温かい', 'クール', 'ドラマチック'等の抽象的タグ

#### 4.2 EXIF情報をタグ化
- **カメラ情報タグ**: 'Canon', 'Nikon', '50mm', 'f1.4'
- **撮影設定タグ**: 'ISO100', '高速シャッター', 'マクロ'
- **位置情報タグ**: 'Tokyo', '海辺', '都市部'
- **時間タグ**: '朝', '夕方', 'ゴールデンアワー'

### Phase 5: テスト・デバッグ・最適化（30分）
#### 5.1 各モード間の切り替えテスト
#### 5.2 写真ファイルでの動作確認
#### 5.3 UIの表示確認とレスポンシブ対応

## 🏷️ 写真家モードの核心機能：タグベース検索システム

### 対応ファイル形式（他2モードと同様）
- **JPEG/JPG**: デジタル写真の標準形式
- **PNG**: 高品質画像・透過画像  
- **GIF**: アニメーション・Web用画像
- **PDF**: 文書・資料・ポートフォリオ等

### タグ抽出システム（9カテゴリ・全ファイル形式対応）
1. **🎯 被写体・内容タグ**: person, portrait, family, animal, character, document, contract, portfolio
2. **🎨 色彩・スタイルタグ**: blue, red, warm_tone, cool_tone, high_contrast, pastel, monochrome, vibrant
3. **📐 構図・レイアウトタグ**: close_up, wide_shot, aerial_view, symmetry, centered, grid_layout, text_heavy
4. **💡 光線・品質タグ**: natural_light, golden_hour, backlight, studio_light, soft_light, high_quality, scanned
5. **🎭 雰囲気・トーンタグ**: romantic, dramatic, peaceful, energetic, professional, casual, formal, creative
6. **📍 場所・用途タグ**: outdoor, indoor, studio, beach, forest, urban, business, presentation, reference
7. **🎪 ジャンル・分野タグ**: wedding, portrait, landscape, street, fashion, event, concept_art, documentation
8. **⚙️ 技法・形式タグ**: bokeh, HDR, long_exposure, macro_lens, digital_art, PDF_document, multi_page
9. **🎨 作品特化タグ**: digital, hand_drawn, vector, pixel_art, watercolor, manga, anime, realistic, chibi, sketch

### 検索強化システム（全ファイル形式統合対応）
- **多言語タグ**: 'portrait' + 'ポートレート', 'document' + '文書' 同時検索対応
- **階層検索**: 'art' → 'digital_art', 'traditional_art', 'concept_art'
- **関連タグ**: 'portfolio' → 'presentation', 'professional', 'creative'
- **ファイル種別自動判定**: 写真/イラスト/文書を自動識別してタグ付け
- **インクリメンタル検索**: タグ入力中にリアルタイム候補表示

## 🚀 実装後の機能拡張可能性

### 将来的なタグシステム拡張
1. **タグ学習機能**: ユーザーの検索パターンからタグ優先度を自動調整
2. **カスタムタグ**: ユーザー独自のタグカテゴリ追加機能
3. **タグクラスタリング**: 関連タグの自動グループ化
4. **AI推薦**: 「このタグで検索する人は○○も検索しています」
5. **タグ統計**: 最も使用頻度の高いタグの分析・表示

### タグベース検索の他業種応用
- **デザイナー**: color_scheme, typography, layout, modern, vintage, illustration, vector
- **EC事業者**: product_category, season, style, color, material, lifestyle, commercial
- **マーケティング**: campaign_type, target_audience, emotional_tone, brand_identity
- **教育機関**: educational, infographic, diagram, character, animation, textbook
- **ゲーム業界**: character_design, background, UI, pixel_art, concept_art, 3D_model

## 📊 成功指標

### タグ抽出精度指標（写真/イラスト統合評価）
- **タグ生成成功率**: 画像ファイル（写真・イラスト）で95%以上のタグ抽出成功
- **タグ多様性**: 1画像あたり20-30個の多角的タグ生成
- **画像種別判定精度**: 実写/イラストの自動判定で90%以上の正確性
- **検索適合率**: 生成タグによる検索で目的画像の90%以上を発見可能

### ユーザー体験指標（写真/イラスト混在環境）
- **検索効率**: 従来のファイル名検索比で3倍以上の検索精度
- **タグ直感性**: 生成されたタグの80%以上がユーザーの期待と一致
- **イラスト専門タグ**: デジタル/手描き/画風の判定精度85%以上
- **検索時間短縮**: 目的画像発見まで平均30秒以内

## 🔧 実装時の注意点

### セキュリティ・プライバシー
- ポートレート写真での個人情報保護
- GPS位置情報の適切な取り扱い
- クライアント写真の機密性確保

### パフォーマンス
- 高解像度画像での処理時間最適化
- 大量画像ファイルでの安定動作
- API使用量の適切な管理

### 互換性
- 既存2モードとの共存
- モード切り替え時のデータ整合性
- 設定保存・復元の正確性

---

## 📝 開発スケジュール

| フェーズ | 作業内容 | 予想時間 | 担当 |
|---------|---------|---------|------|
| Phase 1 | Config.gs設定追加 | 1時間 | Claude Code |
| Phase 2 | DocumentProcessor拡張 | 1.5時間 | Claude Code |
| Phase 3 | UI拡張・モード選択 | 1時間 | Claude Code |
| Phase 4 | プロンプト最適化 | 1時間 | Claude Code |
| Phase 5 | テスト・デバッグ | 30分 | Claude Code |
| **合計** | **全体実装** | **5時間** | |

---

## 🎯 次のアクション

1. **Config.gsに写真家モード設定を追加**
2. **DocumentProcessor.gsで画像専用処理を実装**
3. **search.htmlにモード選択UIを追加**
4. **写真家専用AIプロンプトを実装**
5. **各モードでのテスト実行**

**重要**: 既存のデザイン事務所・会計事務所モードとの互換性を保ちながら、写真家モードを第3のオプションとして追加します。